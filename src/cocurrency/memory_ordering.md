
relax原子操作只能保证一条指令的执行不会被打断，从而被其他线程虚读数据，造成数据竞争；但不能保证，由于多核cpu的二级缓存造成的非同步线程对相同数据的虚读。
虚读就是当同一数据需要被一个线程加工时，在该线程修改并回存数据前，又有线程读取并加工了该数据。

也就是说在单核cpu上，如果时多线程，其中一个线程对数据A进行了 relax 加工，该加工指令执行要么成功要么失败，等加工后另一个线程才能访问到数据A进行处理，这就体现了 relax 的原子性。但是多核就线程间就不存在有序访问数据A的关系了，线程1和线程2对数据A的加工都是并行的，且都是原子操作。